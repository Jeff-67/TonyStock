# Instructions

During you interaction with the user, if you find anything reusable in this project (e.g. version of a library, model name), especially about a fix to a mistake you made or a correction you received, you should take note in the `Lessons` section in the `.cursorrules` file so you will not make the same mistake again. 

You should also use the `.cursorrules` file as a scratchpad to organize your thoughts. Especially when you receive a new task, you should first review the content of the scratchpad, clear old different task if necessary, first explain the task, and plan the steps you need to take to complete the task. You can use todo markers to indicate the progress, e.g.
[X] Task 1
[ ] Task 2
Also update the progress of the task in the Scratchpad when you finish a subtask.

# Tools Usage

1. Environment Setup
   - Always activate conda environment 'stock' before running tools
   - Use run_terminal_cmd for executing Python scripts
   - Set appropriate timeout values for web scraping

2. Data Collection
   - Use web_scraper.py for detailed web content
     * Command format: python tools/web_scraper.py [URLs...] [--max-concurrent N] [--debug]
     * Example: python tools/web_scraper.py "https://example1.com" "https://example2.com" --max-concurrent 5
     * URLs must be valid and complete (including http:// or https://)
     * URLs with special characters (like ? & =) must be wrapped in quotes
     * Default max concurrent connections is 5
     * Use --debug flag for detailed logging
     * Tool will automatically handle timeouts (30s) and retries
     * Outputs both raw content and formatted text with hyperlinks

   - Use search_engine.py for news and market updates
     * Command format: python tools/search_engine.py "search query" [--max-results N]
     * Example: python tools/search_engine.py "京鼎 半導體設備 市場規模"
     * Put search query in quotes if it contains spaces
     * Default max results is 10
     * DO NOT use --query or --days parameters
     * Uses DuckDuckGo search with both API and HTML fallback
     * Includes debug logging for troubleshooting
     * Returns URL, title, and snippet for each result

   - Cross-validate data from multiple sources
     * Always verify information from multiple sources
     * Compare news articles with official announcements
     * Check consistency of financial data
     * Validate market size and growth projections

3. Analysis Tools
   - Use enhanced_stock_analyzer.py for technical analysis
   - Use report_generator.py for comprehensive reports

# Lessons

## Tool Usage
- Always use run_terminal_cmd to execute Python scripts
- Activate conda environment before running tools
- Set appropriate timeout values for web scraping
- Handle different character encodings (UTF-8) properly
- Use correct relative paths for files and images

## Stock Analysis
- Cross-validate data from multiple sources
- Track both monthly and yearly growth rates
- Monitor key financial ratios and trends
- Consider industry-specific metrics
- Watch for one-time events affecting numbers

## Analysis Frameworks
1. Financial Performance
   - Monthly revenue (MoM, YoY)
   - Quarterly metrics (EPS, margins)
   - Annual growth trends
   - Cash flow indicators

2. Industry Analysis
   - Market position & share
   - Competitive advantages
   - Supply chain dynamics
   - Technology trends

3. Growth Drivers
   - New products/technologies
   - Capacity expansion
   - Market opportunities
   - Customer dynamics

4. Risk Assessment
   - Short-term operational risks
   - Long-term strategic risks
   - Industry cycle position
   - External factors

5. Investment Checklist
   - Key performance indicators
   - Entry/exit timing
   - Risk tolerance levels
   - Monitoring metrics

## Industry Analysis Guidelines
1. 產業結構分析
   - 市場規模與成長性
   - 產業價值鏈定位
   - 競爭格局變化
   - 進入障礙評估

2. 競爭力分析
   - 技術優勢
   - 成本結構
   - 客戶關係
   - 創新能力

3. 成長動能評估
   - 新產品發展
   - 市場擴張
   - 策略合作
   - 營運效率

4. 風險監控
   - 產業循環風險
   - 技術變遷風險
   - 競爭加劇風險
   - 法規政策風險

## Data Collection Guidelines
1. 財務數據
   - 官方公告為主
   - 券商研報為輔
   - 產業數據佐證
   - 即時新聞更新

2. 產業資訊
   - 上下游供需變化
   - 競爭對手動態
   - 技術發展趨勢
   - 政策法規影響

## Report Writing
- Start with key findings and summary
- Include data sources and timestamps
- Use clear section hierarchy
- Highlight risks and opportunities
- Keep analysis objective and data-driven

## Investment Analysis Best Practices

1. 報告架構設計
   - 核心投資亮點：最重要的2-3個投資理由
   - 競爭優勢分析：市場定位和策略合作
   - 成長動能分析：短期催化劑和中長期發展
   - 風險評估：營運風險和產業風險
   - 投資建議：分短中長期提供具體建議
   - 關鍵監控指標：營運面、產業面、政策面
   - 估值分析：相對估值和歷史估值比較

2. 數據引用原則
   - 市場數據：引用權威研究機構 (e.g., IndustryARC, Mordor Intelligence)
   - 公司數據：以公司公告和財報為主
   - 產業趨勢：引用大廠法說會資訊
   - 技術發展：引用專業研究報告
   - 每個重要數據都標註來源

3. Insight提供方式
   - 在每個重要段落後提供深度觀點
   - 連結不同面向的資訊（如：技術趨勢與營收成長）
   - 提供前瞻性的判斷
   - 分析背後的邏輯和因果關係

4. 風險分析框架
   - 營運風險：客戶集中度、產能利用率
   - 產業風險：景氣循環、競爭態勢
   - 技術風險：技術轉換、研發進展
   - 政策風險：產業政策、地緣政治
   - 並提供對應的緩解方案

5. 投資建議架構
   - 短期（6-12個月）：基於確定性高的因素
   - 中期（1-2年）：基於可見的成長動能
   - 長期（2年以上）：基於競爭優勢和產業趨勢
   - 提供具體的買賣價位區間

6. 監控指標設計
   - 量化指標：財務比率、營運數據
   - 質化指標：產品進展、策略執行
   - 產業指標：終端需求、供應鏈變化
   - 設定警戒值和檢視頻率

7. 報告更新機制
   - 定期更新：每季財報後
   - 不定期更新：重大事件發生
   - 持續追蹤：關鍵指標變化
   - 及時調整：投資建議修正

8. 跨領域分析整合
   - 產業鏈分析：上下游互動關係
   - 技術發展：對產品和市場的影響
   - 政策影響：產業扶植或限制措施
   - 總體環境：經濟週期和產業週期

## Lessons from 京鼎分析
1. 基本資料確認
   - 確保股票代號正確（京鼎是3413不是1762）
   - 仔細核對公司名稱和基本資料
   - 避免與其他公司混淆

2. 數據驗證
   - 交叉驗證不同來源的市場規模預測
   - 確認公司公告數據的時效性
   - 檢視歷史預測的準確度

3. 風險評估
   - 單一客戶依賴度過高需特別關注
   - 產能擴充計劃的執行風險
   - 地緣政治對供應鏈的影響

4. 成長動能分析
   - 結合終端市場需求和公司布局
   - 評估新產品對營收的貢獻時程
   - 考慮產能爬坡的節奏

5. 報告呈現
   - 將複雜的產業鏈關係圖像化
   - 用數據支持每個重要論點
   - 提供具體可操作的投資建議

## Scratchpad

Task: 分析 Anduril Industries 投資價值

分析步驟：
[ ] 1. 公司概況
    - 公司背景與發展歷程
    - 創始團隊背景
    - 主要產品線
    - 商業模式分析

[ ] 2. 市場定位與競爭優勢
    - 國防科技市場分析
    - 核心技術優勢
    - 競爭對手比較
    - 市場份額與地位

[ ] 3. 成長動能
    - 政府合約情況
    - 新產品研發進展
    - 國際市場拓展
    - 未來訂單能見度

[ ] 4. 風險評估
    - 政府預算依賴風險
    - 地緣政治風險
    - 技術研發風險
    - 競爭加劇風險

[ ] 5. 投資建議
    - 估值分析
    - 投資時點建議
    - 風險控制建議
    - 關鍵監控指標

Task完成：已生成完整投資分析報告，包含數據支持和來源引用。

## Lessons from Anduril vs Boeing Analysis

1. 數據引用規範
   - 每個重要數據都需要明確的來源引用
   - 引用時需包含具體日期和出處
   - 優先使用官方公告和財報數據
   - 交叉驗證重要數據的準確性

2. 結構化對比分析
   - 使用相同維度進行對比
   - 每個對比點都需要數據支持
   - 清晰標示優劣勢
   - 避免主觀或無數據支持的判斷

3. 時效性管理
   - 標注所有數據的時間點
   - 區分歷史數據和預測數據
   - 關注數據的時間跨度
   - 定期更新重要指標

4. 多維度分析框架
   - 財務數據：具體到季度和項目
   - 技術能力：列舉已實現和在研項目
   - 市場地位：具體市占率和排名
   - 發展趨勢：有數據支持的預測

5. 專業術語使用
   - 準確使用行業專有名詞
   - 解釋複雜技術概念
   - 保持術語使用一致性
   - 必要時提供補充說明

6. 競爭分析最佳實踐
   - 對比需要對等和公平
   - 避免過度推測或主觀判斷
   - 關注可量化的指標
   - 考慮產業特殊性

7. 報告呈現改進
   - 數據可視化的重要性
   - 層次分明的結構
   - 重點突出的排版
   - 邏輯清晰的論述

8. 風險分析深化
   - 區分短期和長期風險
   - 提供風險緩解建議
   - 評估風險影響程度
   - 持續監控風險變化